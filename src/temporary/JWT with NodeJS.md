# JWT with NodeJS



# Authentication

Is the process of checking if you really are the person that you claim to be

# Authorization

Comes after authentication is the process of checking of depending on your status, depending on your conditions what are you allowd to do.

# Session ID

Usually, session id is sent to the user as a cookie

[https://stackabuse.com/handling-authentication-in-express-js/](https://stackabuse.com/handling-authentication-in-express-js/)

# Base64 Encoding

Is one way of making sure the data is uncorrupted (no compress or encrypt data)

[https://stackabuse.com/encoding-and-decoding-base64-strings-in-node-js/](https://stackabuse.com/encoding-and-decoding-base64-strings-in-node-js/)

# JWT Structure

xxxxx.yyyyy.zzzzz

- **Header**
    
    Is a Base64-encoded string
    
    Contains the hashing algorithm (alg)
    
    Contains the type of the token (typ)
    
    ```sql
    {
      "alg": "HS256",
      "typ": "JWT"
    }
    ```
    
- **Payload**
    
    Contains Base64-encoded JSON object that was sent back to client
    
    Do not include any sensitive data in JWTs
    
    sub - Contains ID of the user
    
    iat - Issued at, timestamp of when the token is issued
    
    ```sql
    {
      "sub": "1234567890",
      "name": "John Doe",
      "iat": 1516239022
    } 
    ```
    
- **Signature**
    
    This is generated by hashing the string:
    
    ```sql
    "base64UrlEncode(header) + . + base64UrlEncode(payload) + secret"
    ```
    
    using the algorithm that is mentioned in the header section
    
    secret - is a random string which only the server should know
    
    p
    

# Sending Token

The client should send this token to the server via HTTP request in header called **Authorization** with the form **Bearer [TOKEN]** 

```json
Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.XbPfbIHMI6arZ3Y922BhjWgQzWXcXNrz0ogtVhfEd2o
```

[https://stackabuse.com/understanding-json-web-tokens-jwt/](https://stackabuse.com/understanding-json-web-tokens-jwt/)

# Token Generation

```tsx
// npm jsonwebtoken
const token = jwt.sign(payload, secret, options) 
```

# Hash Password

```tsx
// npm bcrypt
const salt = await bcrypt.genSalt(10);
const hash = await bcrypt.hash(password, salt);
```

# Functions

- jsonwebtoken
    - sign() -
    - verify() -
- bcrypt
    - genSalt() - Generate a Salt
    - hash() - Generate a Hash
    - compare() - Compare given data against the given hash